---
const { category, posts } = Astro.props;
---

<style>
  .folder {
    background: #f8fafc;
    border: 1px solid #d1d5db;
    border-radius: 12px;
    margin-bottom: 1rem;
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .folder-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 1.25rem;
    cursor: pointer;
    background: #e6f0f6;
    color: #015581;
    font-weight: 600;
    font-size: 1.2rem;
  }

  .folder-header:hover {
    background: #dceefc;
  }

  .folder-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease;
    background: #fff;
  }

  .folder-content.open {
    max-height: 1000px; /* enough to show 5 posts */
  }

  .post {
    padding: 1rem 1.25rem;
    border-top: 1px solid #eee;
  }

  .post h3 {
    margin: 0 0 0.3rem 0;
    color: #015581;
  }

  .post p {
    margin: 0.25rem 0;
    color: #333;
    font-size: 0.9rem;
  }

  .post small {
    color: #777;
  }
</style>

<div class="folder" data-category={category}>
  <div class="folder-header">
    {category}
    <span class="arrow">▼</span>
  </div>
  <div class="folder-content">
    {posts.slice(0, 5).map(post => (
      <div class="post">
        <a href={post.url} target="_blank" style="text-decoration:none; color:inherit;">
          <h3>{post.name || 'Untitled'}</h3>
          <p><strong>Topic:</strong> {post.Topic || 'N/A'}</p>
          <p>{post.description || 'No description'}</p>
          <small>Audience: {post.audience || 'N/A'} | OSPO Relevance: {post['OSPO Relevance'] || 'N/A'}</small>
        </a>
      </div>
    ))}
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const folders = document.querySelectorAll(".folder");
    folders.forEach(folder => {
      const header = folder.querySelector(".folder-header");
      const content = folder.querySelector(".folder-content");
      const arrow = folder.querySelector(".arrow");

      header.addEventListener("click", () => {
        const isOpen = content.classList.toggle("open");
        arrow.textContent = isOpen ? "▲" : "▼";
      });
    });
  });
</script>